## [П]|[РС]|(РП) CartToPolar и PolarToCart

Функции *cvCartToPolar()* и *cvPolarToCart()*, как правило, используются более сложными функциями, такими как *cvLogPolar()*, но и сами по себе тоже весьма полезны. Эти функции преобразуют значения отображения между декартовым (*x*, *y*) и полярным (*r*, *θ*) пространствами (т.е. из декартовых в полярные координаты и наоборот). 

```cpp
void cvCartToPolar(
     const CvArr*   x
    ,const CvArr*   y
    ,CvArr*         magnitude
    ,CvArr*         angle = NULL
    ,int            angle_in_degrees = 0
);

void cvPolarToCart(
     const CvArr*   magnitude
    ,const CvArr*   angle
    ,CvArr*         x
    ,CvArr*         y
    ,int            angle_in_degrees = 0
);
```

В обоих функциях первые два аргумента это исходные двухмерные массивы или изображения, а следующие два аргумента это конечные. Если какой-либо из конечных указателей установлен в NULL, тогда он не будет участвовать в вычислениях. Эти массивы должны быть вещественного типа (*float* или *double*) и соотноситься друг с другом (по размеру, количеству каналов и типу). Последний параметр указывает с какими углами, в градусах (0, 360) или в радианах (0, 2π), осуществляется работа.

Для примера, чтобы осознать назначение этих функций, предположим, что уже получены производные от изображения по *x* и *y*, либо при помощи *cvSobel()*, либо при помощи функции свертки *cvDFT()* или *cvFilter2D()*. Если сохранить x-производные в изображение *dx_img*, а y-производные в изображение *dy_img*, тогда можно создать гистограмму распознавания углов краев. То есть, можно отобрать все углы согласно заданным значениям или силе (магнитуде) краев, которая больше некоторого порога. Для выполнения данных расчетов, необходимо наличие двух уже созданных изображений одного типа (целочисленного или вещественного) в качестве производных изображений и, например, назвать их *img_mag* и *img_angle*. Тогда для получения результата в градусах необходимо применить функцию *cvCartToPolar( dx_img, dy_img, img_mag, img_angle, 1 )*. Заполнение гистограммы значениями *img_angle* происходит до тех пор, пока значение соответствующего "пикселя" *img_mag* выше установленного порога.

